---
title: 日志
categories:
  - MySQL必知必会
toc: true 
---

- MySQL 日志包括通用查询日志、慢查询日志、错误日志、二进制日志、中继日志、重做日志和回滚日志
  - 通用查询日志
    记录了所有用户的连接开始时间和截止时间，以及发给 MySQL 数据库服务器的所有 SQL 指令，**还原操作时的具体场景**，帮助我们了解操作发生的具体时间和操作的细节
    - show variables like '%general%';
      ![image-20211014132742404](C:\Users\chenjiaxi\AppData\Roaming\Typora\typora-user-images\image-20211014132742404.png)
    - SET GLOBAL general_log = 'ON'; 
    - SET @@global.general_log_file = 'mytest.log';
  - 慢查询日志
    - show variables like 'min%';
    - long_query_time=10 和 min_examined_row_limit=0 共同判断：只要查询时间和扫描行数大于这2值就记录慢日志
  - 错误日志（排障首选）
    - 错误日志文件中记录了服务器启动的时间，以及存储引擎 InnoDB 启动和停止的时间等。
  - 二进制日志
    记录数据库的更新事件
    - 查看
      - 正在写入的二进制日志
        - SHOW MASTER STATUS;
      - 所有的二进制日志
      - 二进制日志中所有数据更新事件

